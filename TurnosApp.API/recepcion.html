<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>WaitLess - Centro de Recepci贸n</title>
    <style>
        /* ... (Tus estilos CSS aqu铆, sin cambios) ... */
        body { font-family: 'Segoe UI', sans-serif; background: #f0f4f8; padding: 20px; }
        .container { max-width: 900px; margin: auto; }
        .brand { text-align: center; font-size: 32px; font-weight: bold; color: #1a73e8; margin-bottom: 20px; }
        .brand span { color: #27ae60; font-weight: 300; }
        .card { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; animation: fadeIn 0.6s ease-out; }
        h2 { border-bottom: 2px solid #f0f4f8; padding-bottom: 10px; color: #333; font-size: 1.1rem; }
        .form-group { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
        input, select { padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; }
        .btn-ingresar { grid-column: span 2; padding: 15px; background: #1a73e8; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: background 0.3s ease; }
        .btn-ingresar:hover { background: #1557b0; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th { text-align: left; padding: 12px; background: #f8f9fa; color: #666; }
        td { padding: 12px; border-bottom: 1px solid #eee; }
        tr { animation: slideIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        .success-msg { display: none; background: #d4edda; color: #155724; padding: 10px; border-radius: 8px; text-align: center; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="container">
    <div class="brand">Wait<span>Less</span></div>

    <div class="card">
        <h2> Registro Manual (Demanda Espont谩nea)</h2>
        <div id="msg" class="success-msg">隆Paciente ingresado correctamente!</div>
        <div class="form-group">
            <input type="text" id="nombre" placeholder="Nombre completo">
            <input type="text" id="tel" placeholder="WhatsApp (+54...)">
            <select id="docId">
                <option value="1">Dr. Gaston Carranza (Cardiolog铆a)</option>
            </select>
            <button class="btn-ingresar" onclick="enviarTurno()">DAR INGRESO A SALA</button>
        </div>
    </div>

    <div class="card">
        <h2> Agenda de Turnos Programados</h2>
        <table>
            <thead>
                <tr>
                    <th>Hora</th>
                    <th>Paciente</th>
                    <th>Acci贸n</th>
                </tr>
            </thead>
            <tbody id="lista-turnos-agenda">
                </tbody>
        </table>
    </div>
</div>

<script>
    // URL BASE: Apunta al controlador funcional 'Doctor'
    const API_BASE = 'http://localhost:5192/api/Doctor'; 

 async function registrarTurno() {
    // 1. Capturar los datos del formulario
    const nombre = document.getElementById('nombre').value;
    const telefono = document.getElementById('telefono').value;

    const nuevoTurno = {
        pacienteNombre: nombre,
        pacienteTelefono: telefono,
        motivo: "Consulta General" // Puedes agregar un input para esto
    };

    try {
        // 2. Enviar a la API
        const response = await fetch(`${CONFIG.API_URL}/turnos`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(nuevoTurno)
        });

        if (response.ok) {
            const resultado = await response.json();
            alert(`隆Turno registrado! Tu c贸digo es: ${resultado.tokenAcceso || 'Exitoso'}`);
            // Limpiar formulario
            document.getElementById('formTurno').reset();
        } else {
            alert("Error al registrar el turno.");
        }
    } catch (error) {
        console.error("Error de conexi贸n:", error);
        alert("No se pudo conectar con el servidor.");
    }
}

    // Nota: Las funciones de agenda (cargarAgenda, confirmar) est谩n comentadas porque no son necesarias para este proyecto.
</script>
</body>
</html>